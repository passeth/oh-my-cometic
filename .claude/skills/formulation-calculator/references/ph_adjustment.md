# pH Adjustment Reference

## pH 기초 개념

### pH 정의
```
pH = -log[H+]

[H+] = 수소이온 농도 (mol/L)
```

pH 스케일은 **로그 스케일**입니다:
- pH 1 차이 = H+ 농도 10배 차이
- pH 4 → pH 5: H+ 농도 1/10로 감소
- pH 6 → pH 4: H+ 농도 100배 증가

### 화장품 pH 범위 가이드

| 제품 유형 | 권장 pH | 피부 적합성 |
|----------|--------|------------|
| 건강한 피부 | 4.5-5.5 | 산성 맨틀 |
| 일반 스킨케어 | 5.0-7.0 | 적합 |
| AHA/BHA 제품 | 3.0-4.0 | 각질 제거 활성 |
| 비타민 C (L-AA) | 2.5-3.5 | 안정성/흡수 최적 |
| 나이아신아마이드 | 5.0-7.0 | 안정 범위 |
| 레티놀 | 5.5-6.5 | 안정성 최적 |
| 클렌징 폼 | 5.5-7.0 | 부드러운 세정 |
| 비누 | 9.0-10.0 | 알칼리성 |
| 헤어 컨디셔너 | 3.5-5.5 | 큐티클 밀착 |
| 데오도란트 | 4.0-6.0 | 세균 억제 |

### 피부 pH와 제품 pH

피부의 산성 맨틀(Acid Mantle):
- 건강한 피부 pH: 4.5-5.5
- 피부 장벽 기능 유지에 중요
- 과도한 알칼리 노출 시:
  - 피부 장벽 손상
  - 건조함, 자극 유발
  - 세균 증식 촉진

## Henderson-Hasselbalch 방정식

약산/짝염기 버퍼 시스템의 pH 계산:

```
pH = pKa + log([A-] / [HA])

[A-] = 짝염기(공액염기) 농도
[HA] = 산 농도
pKa = 산 해리 상수의 음의 로그
```

### 역계산: 버퍼 비율 계산

```python
def calculate_buffer_ratio(target_ph: float, pka: float) -> dict:
    """
    목표 pH를 위한 산/짝염기 비율 계산

    Args:
        target_ph: 목표 pH
        pka: 산의 pKa

    Returns:
        {"acid_ratio": float, "base_ratio": float}
    """
    import math

    ratio = 10 ** (target_ph - pka)
    # ratio = [A-] / [HA]

    # 정규화 (합이 1이 되도록)
    base_ratio = ratio / (1 + ratio)
    acid_ratio = 1 / (1 + ratio)

    return {
        "acid_ratio": round(acid_ratio, 4),
        "base_ratio": round(base_ratio, 4)
    }
```

### 예시: pH 4.5 시트르산 버퍼

```
시트르산 pKa2 = 4.76 (가장 관련 있는 해리)
목표 pH = 4.5

비율 = 10^(4.5 - 4.76) = 10^(-0.26) = 0.55

base_ratio = 0.55 / 1.55 = 0.35 (35% 소듐시트레이트)
acid_ratio = 1 / 1.55 = 0.65 (65% 시트르산)
```

## 버퍼 시스템

### 주요 버퍼 시스템 특성

#### 1. 시트르산/소듐시트레이트 (가장 범용)

```
시트르산 (Citric Acid): C6H8O7
- MW: 192.12 g/mol
- pKa1: 3.13
- pKa2: 4.76
- pKa3: 6.40
- 유효 pH 범위: 2.5-7.0
```

| 목표 pH | 시트르산 % | 소듐시트레이트 % |
|--------|----------|-----------------|
| 3.0 | 85% | 15% |
| 3.5 | 70% | 30% |
| 4.0 | 55% | 45% |
| 4.5 | 35% | 65% |
| 5.0 | 20% | 80% |
| 5.5 | 10% | 90% |
| 6.0 | 5% | 95% |

#### 2. 젖산/소듐락테이트

```
젖산 (Lactic Acid): C3H6O3
- MW: 90.08 g/mol
- pKa: 3.86
- 유효 pH 범위: 3.0-5.0
- 특징: AHA 기능, 피부 친화적
```

| 목표 pH | 젖산 % | 소듐락테이트 % |
|--------|-------|---------------|
| 3.5 | 70% | 30% |
| 4.0 | 42% | 58% |
| 4.5 | 19% | 81% |

#### 3. 아세트산/소듐아세테이트

```
아세트산 (Acetic Acid): CH3COOH
- MW: 60.05 g/mol
- pKa: 4.76
- 유효 pH 범위: 4.0-6.0
- 특징: 식초 냄새, 제한적 사용
```

#### 4. 인산염 버퍼

```
인산 (Phosphoric Acid): H3PO4
- pKa1: 2.15 (H3PO4 ⇌ H2PO4-)
- pKa2: 7.20 (H2PO4- ⇌ HPO4²-)
- pKa3: 12.35 (HPO4²- ⇌ PO4³-)
- 유효 pH 범위: 6.0-8.0 (주로 pKa2 활용)
- 특징: 생리적 버퍼, 세정제에 적합
```

#### 5. 글루코노락톤/글루콘산

```
글루코노락톤 (Gluconolactone): C6H10O6
- MW: 178.14 g/mol
- 가수분해 후 pKa: 3.6
- 유효 pH 범위: 3.0-4.5
- 특징: PHA, 부드러운 각질 제거
```

### 버퍼 용량 (Buffer Capacity)

버퍼 용량(β)은 pH 변화에 대한 저항 능력:

```
β = dCb / dpH = -dCa / dpH

Cb = 첨가된 염기 농도
Ca = 첨가된 산 농도
```

#### 최대 버퍼 용량

```
β_max = 0.576 × C

C = 총 버퍼 농도
조건: pH = pKa일 때
```

#### 실용적 버퍼 용량 공식

```
β = 2.303 × C × Ka × [H+] / (Ka + [H+])²

Ka = 산 해리 상수
[H+] = 수소이온 농도
C = 총 버퍼 농도
```

#### 화장품 권장 버퍼 농도

| 제품 유형 | 버퍼 농도 | 버퍼 용량 |
|----------|---------|----------|
| 토너 | 0.1-0.2% | 낮음 |
| 세럼 | 0.2-0.5% | 중간 |
| 크림 | 0.1-0.3% | 낮음-중간 |
| 클렌저 | 0.3-1.0% | 높음 |
| AHA 제품 | 0.5-2.0% | 높음 |

## pH 조정제

### 산 (pH 낮추기)

| 산 | INCI | pKa | 특징 | 사용량 |
|----|------|-----|------|-------|
| 시트르산 | Citric Acid | 3.13, 4.76, 6.40 | 범용, 킬레이트 | 10% 용액 |
| 젖산 | Lactic Acid | 3.86 | AHA, 보습 | 10% 용액 |
| 글리콜산 | Glycolic Acid | 3.83 | AHA, 침투력 | 10% 용액 |
| 인산 | Phosphoric Acid | 2.15, 7.20, 12.35 | 세정제 | 10% 용액 |
| 아스코르브산 | Ascorbic Acid | 4.10 | 비타민 C | 분말 |
| 염산 | Hydrochloric Acid | -6 (강산) | 강력, 주의 필요 | 1N 용액 |

### 알칼리 (pH 높이기)

| 알칼리 | INCI | pKb/성질 | 특징 | 사용량 |
|-------|------|---------|------|-------|
| 수산화나트륨 | Sodium Hydroxide | 강염기 | 범용, 빠른 조정 | 10% 용액 |
| 수산화칼륨 | Potassium Hydroxide | 강염기 | 비누화, 조정 | 10% 용액 |
| 트리에탄올아민 | Triethanolamine | 7.76 | 부드러운 조정, 중화 | 원액 |
| 아미노메틸프로판올 | Aminomethyl Propanol | 9.96 | 카보머 중화 | 원액 |
| 아르기닌 | Arginine | 12.48 | 천연, 순함 | 분말 |
| 소듐시트레이트 | Trisodium Citrate | 염기성 염 | 버퍼 성분 | 10% 용액 |

### pH 조정제 선택 가이드

```
강한 조정 (pH 2 이상 변화):
- 산: HCl (1N), Citric Acid (10%)
- 염기: NaOH (10%), KOH (10%)

부드러운 조정 (pH 0.5-2 변화):
- 산: Citric Acid (10%), Lactic Acid (10%)
- 염기: TEA, AMP, Arginine

미세 조정 (pH 0.5 이하):
- 버퍼 성분 비율 조정
- 희석 용액 사용 (1-5%)
```

## pH 조정 실무

### 조정제 필요량 계산

```python
def calculate_acid_needed(current_ph: float, target_ph: float,
                          volume_ml: float, buffer_capacity: float = 0.01) -> dict:
    """
    pH 조정에 필요한 산의 양 계산

    Args:
        current_ph: 현재 pH
        target_ph: 목표 pH
        volume_ml: 용액 부피 (mL)
        buffer_capacity: 버퍼 용량 (mol/L/pH), 기본 0.01

    Returns:
        {
            "acid_mmol": float,      # 필요한 산 (mmol)
            "citric_10pct_ml": float # 10% 시트르산 용액 (mL)
        }
    """
    delta_ph = current_ph - target_ph

    if delta_ph <= 0:
        return {"error": "pH를 낮추려면 current_ph > target_ph"}

    # 필요한 산 (mmol)
    acid_mmol = buffer_capacity * (volume_ml / 1000) * delta_ph * 1000

    # 10% 시트르산 (MW 192.12) 용액 환산
    # 10% = 100g/L = 0.52 mol/L = 520 mmol/L
    citric_ml = acid_mmol / 520 * 1000

    return {
        "acid_mmol": round(acid_mmol, 3),
        "citric_10pct_ml": round(citric_ml, 3),
        "note": "실제량은 적정으로 결정 권장"
    }
```

### 단계별 pH 조정 절차

```
1. 현재 pH 측정
   - 전극 교정 확인
   - 온도 기록 (20-25°C 표준)

2. 목표 pH 결정
   - 제품 요구사항
   - 성분 안정성
   - 효능 최적화

3. 조정제 선택
   - 버퍼 시스템 내: 버퍼 성분 비율 조정
   - 버퍼 범위 외: 강산/강염기 사용

4. 조정제 첨가
   - 계산량의 50-70%부터 시작
   - 교반하며 천천히 첨가
   - 균일 혼합 후 측정

5. pH 확인 및 미세 조정
   - 목표 ±0.1 범위까지 조정
   - 기록: 조정제 종류, 사용량, 최종 pH

6. 안정성 확인
   - 24시간 후 재측정
   - 가속 시험 (40°C/75%RH)
```

## pH 민감 성분

### pH에 따른 안정성/효능 변화

| 성분 | 최적 pH | 민감 범위 | 주의사항 |
|------|--------|----------|---------|
| L-Ascorbic Acid | 2.5-3.5 | pH > 4에서 산화 빠름 | 낮은 pH 필수 |
| Niacinamide | 5.0-7.0 | pH < 4에서 니코틴산 전환 | 산성 회피 |
| Retinol | 5.5-6.5 | pH > 7에서 분해 | 중성 유지 |
| Salicylic Acid | 3.0-4.0 | pH > 4에서 효능 감소 | pKa = 2.97 |
| Glycolic Acid | 3.0-4.0 | pH > 4에서 효능 감소 | pKa = 3.83 |
| Hyaluronic Acid | 5.0-8.0 | pH < 4, > 9에서 분해 | 중성 권장 |
| Vitamin E | 5.0-8.0 | pH > 8에서 비누화 | 알칼리 회피 |
| Peptides | 5.0-7.0 | 성분별 다름 | 사양서 확인 |
| Resveratrol | 3.0-6.0 | pH > 7에서 산화 | 산성~중성 |
| Ferulic Acid | 3.0-5.0 | pH > 6에서 변색 | 산성 유지 |

### 성분 조합 시 pH 전략

```
비타민 C + E + 페룰산 (CE Ferulic):
- 최적 pH: 2.5-3.5
- 시트르산 버퍼 사용
- 니아신아마이드 병용 X

니아신아마이드 + 히알루론산:
- 최적 pH: 5.0-6.0
- 시트르산/소듐시트레이트 버퍼

레티놀 + 펩타이드:
- 최적 pH: 5.5-6.5
- 인산염 버퍼 또는 아미노산 버퍼
```

## 온도 보정

pH는 온도에 따라 변합니다:

```
일반적 경향: 온도 ↑ → pH ↓

보정 공식:
pH(T2) = pH(T1) - α × (T2 - T1)

α = 온도 계수 (약 0.003-0.03/°C, 버퍼에 따라 다름)
```

### 온도 계수 예시

| 버퍼 | α (pH/°C) | 비고 |
|------|----------|------|
| 시트르산 버퍼 | -0.003 | 작음 |
| 인산염 버퍼 | -0.003 | 작음 |
| 트리스 버퍼 | -0.028 | 큼 |
| 물 (순수) | 온도 상승 시 pH 감소 | 중성점 이동 |

### 실무 권장

```
- 측정 온도: 20-25°C 표준화
- 전극: 온도 보정 기능 활용
- 기록: 측정 온도 항상 명시
- 생산: 측정/사용 온도 동일하게
```

## 문제 해결

### 문제: pH가 계속 변함

```
원인 1: CO2 흡수
- 대기 중 CO2가 용해되어 탄산 생성
- 해결: 밀폐 보관, 질소 퍼지

원인 2: 성분 반응
- 에스테르 가수분해, 산화 등
- 해결: 성분 호환성 확인

원인 3: 미생물
- 대사산물로 pH 변화
- 해결: 방부 시스템 강화
```

### 문제: 버퍼가 작동하지 않음

```
원인 1: 버퍼 농도 부족
- 해결: 0.1% → 0.3% 이상으로 증가

원인 2: pH가 버퍼 범위 밖
- pKa ± 1 범위 밖에서는 버퍼 효과 약함
- 해결: 다른 버퍼 시스템 선택

원인 3: 강한 산/염기 성분
- 버퍼 용량 초과
- 해결: 버퍼 증량 또는 성분 농도 조정
```

### 문제: 조정 후 침전 발생

```
원인 1: 염 형성
- 특정 pH에서 용해도 감소
- 해결: 가용화제 추가, pH 재조정

원인 2: 단백질/고분자 응집
- 등전점 근처에서 응집
- 해결: pH를 등전점에서 멀리

원인 3: 금속 이온 침전
- 특정 pH에서 수산화물 생성
- 해결: 킬레이트제 추가 (EDTA, 시트르산)
```
